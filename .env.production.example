# ABY-MED Medical Platform - Production Environment Configuration
# Copy this file to .env.production and configure for your production environment

# ================================
# APPLICATION CONFIGURATION
# ================================
NODE_ENV=production
GO_ENV=production
PORT=8080
APP_NAME=aby-med-platform
VERSION=1.0.0

# ================================
# DATABASE CONFIGURATION
# ================================
# PostgreSQL connection string
DATABASE_URL=postgresql://username:password@localhost:5432/abymed_production?sslmode=require

# Connection pool settings
DB_MAX_CONNECTIONS=50
DB_MIN_CONNECTIONS=5
DB_CONNECTION_TIMEOUT=30
DB_IDLE_TIMEOUT=300
DB_QUERY_TIMEOUT=60

# ================================
# OPENAI CONFIGURATION
# ================================
# Your OpenAI API key (required for AI analysis)
OPENAI_API_KEY=sk-your-production-openai-api-key-here

# AI model settings
OPENAI_MODEL=gpt-4-vision-preview
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.3
OPENAI_TIMEOUT=60

# Cost management
OPENAI_MAX_COST_PER_DAY=100.00
OPENAI_ENABLE_FALLBACK=true

# ================================
# FILE STORAGE CONFIGURATION
# ================================
# Storage type: 'local' or 's3'
STORAGE_TYPE=s3

# Local storage (if STORAGE_TYPE=local)
STORAGE_PATH=/data/attachments

# S3 storage (if STORAGE_TYPE=s3)
AWS_REGION=us-west-2
AWS_ACCESS_KEY_ID=your-access-key-id
AWS_SECRET_ACCESS_KEY=your-secret-access-key
AWS_S3_BUCKET=abymed-attachments-prod

# File upload limits
MAX_FILE_SIZE=100MB
ALLOWED_FILE_TYPES=image/jpeg,image/jpg,image/png,image/gif,image/bmp

# ================================
# API SECURITY CONFIGURATION
# ================================
# API keys format: key:permissions,key:permissions
# Permissions: admin, read, write, upload, delete
API_KEYS=prod-admin-key-1234:admin,prod-read-key-5678:read,prod-upload-key-9012:upload

# JWT settings (for future session management)
JWT_SECRET=your-secure-256-bit-jwt-secret-key-here
JWT_EXPIRY=24h

# CORS settings
CORS_ORIGINS=https://app.abymed.com,https://admin.abymed.com
CORS_ALLOW_CREDENTIALS=true

# ================================
# RATE LIMITING CONFIGURATION
# ================================
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_WINDOW_MINUTES=60
RATE_LIMIT_MAX_BURST=100
RATE_LIMIT_ENABLE_IP_WHITELIST=true
RATE_LIMIT_IP_WHITELIST=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16

# ================================
# SSL/TLS CONFIGURATION
# ================================
SSL_CERT_PATH=/etc/ssl/certs/abymed.crt
SSL_KEY_PATH=/etc/ssl/private/abymed.key
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000

# ================================
# LOGGING & MONITORING
# ================================
# Log level: debug, info, warn, error
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/abymed/app.log
LOG_MAX_SIZE=100MB
LOG_MAX_BACKUPS=10
LOG_MAX_AGE=30

# Structured logging
ENABLE_STRUCTURED_LOGGING=true
ENABLE_STACK_TRACE=true
MASK_SENSITIVE_DATA=true

# Metrics and monitoring
ENABLE_METRICS=true
METRICS_PATH=/metrics
HEALTH_CHECK_PATH=/health

# External monitoring
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
DATADOG_API_KEY=your-datadog-api-key
NEW_RELIC_LICENSE_KEY=your-newrelic-license-key

# ================================
# PERFORMANCE CONFIGURATION
# ================================
# Go runtime settings
GOMEMLIMIT=6GiB
GOMAXPROCS=4

# HTTP server settings
READ_TIMEOUT=30s
WRITE_TIMEOUT=600s
IDLE_TIMEOUT=120s
MAX_HEADER_BYTES=8192

# Request processing
MAX_REQUEST_SIZE=100MB
REQUEST_TIMEOUT=300s
GRACEFUL_SHUTDOWN_TIMEOUT=30s

# ================================
# CACHE CONFIGURATION
# ================================
# Redis settings (for caching and sessions)
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your-redis-password
REDIS_MAX_CONNECTIONS=100
REDIS_IDLE_TIMEOUT=300s

# Cache settings
CACHE_TTL=3600
CACHE_ENABLE_COMPRESSION=true

# ================================
# EMAIL CONFIGURATION (Optional)
# ================================
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM_ADDRESS=noreply@abymed.com
SMTP_FROM_NAME=ABY-MED Platform

# ================================
# BACKUP CONFIGURATION
# ================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=abymed-backups-prod
BACKUP_ENCRYPTION_KEY=your-backup-encryption-key

# ================================
# FEATURE FLAGS
# ================================
ENABLE_AI_ANALYSIS=true
ENABLE_REAL_TIME_UPDATES=true
ENABLE_ADMIN_PANEL=true
ENABLE_API_DOCUMENTATION=true
ENABLE_RATE_LIMITING=true
ENABLE_REQUEST_LOGGING=true

# ================================
# DEVELOPMENT/DEBUG (Production: false)
# ================================
DEBUG_MODE=false
ENABLE_PROFILER=false
ENABLE_DEBUG_ENDPOINTS=false
MOCK_AI_RESPONSES=false

# ================================
# EXTERNAL SERVICES
# ================================
# Webhook endpoints for notifications
WEBHOOK_SUCCESS_URL=https://your-app.com/webhooks/upload-success
WEBHOOK_ERROR_URL=https://your-app.com/webhooks/upload-error

# Third-party integrations
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# ================================
# COMPLIANCE & SECURITY
# ================================
# HIPAA compliance settings
ENABLE_AUDIT_LOGGING=true
AUDIT_LOG_PATH=/var/log/abymed/audit.log
DATA_RETENTION_DAYS=2557  # 7 years for HIPAA
ENCRYPT_AT_REST=true

# PII protection
MASK_PII_IN_LOGS=true
ENABLE_DATA_ANONYMIZATION=false

# Security headers
ENABLE_SECURITY_HEADERS=true
CONTENT_SECURITY_POLICY=default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:

# ================================
# TIMEZONE & LOCALIZATION
# ================================
TZ=America/New_York
LOCALE=en_US.UTF-8
DATE_FORMAT=2006-01-02 15:04:05

# ================================
# ENVIRONMENT SPECIFIC
# ================================
ENVIRONMENT=production
DEPLOYMENT_ID=prod-$(date +%Y%m%d-%H%M%S)
GIT_COMMIT_HASH=will-be-set-by-ci
BUILD_NUMBER=will-be-set-by-ci

# ================================
# MAINTENANCE MODE
# ================================
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_ALLOWED_IPS=10.0.0.0/8
# =============================================================================
# Medical Equipment Platform - Development Environment Configuration
# =============================================================================
# This file contains default environment variables for local development.
# Override these values in .env.local (git-ignored) for your local setup.
# =============================================================================

# -----------------------------------------------------------------------------
# GENERAL SETTINGS
# -----------------------------------------------------------------------------
# Environment name
ENV=development
# Application name
APP_NAME=medical-equipment-platform
# Debug mode (enables additional logging and features)
DEBUG=true
# API version
API_VERSION=v1
# Default timezone
TZ=UTC

# -----------------------------------------------------------------------------
# DATABASE SETTINGS
# -----------------------------------------------------------------------------
# PostgreSQL connection
DB_HOST=postgres
DB_PORT=5432
DB_NAME=medplatform
DB_USER=postgres
DB_PASSWORD=postgres
DB_SCHEMA=public
DB_SSLMODE=disable
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=25
DB_CONN_MAX_LIFETIME=15m
# Connection string template: postgres://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/${DB_NAME}?sslmode=${DB_SSLMODE}
DB_URL=postgres://postgres:postgres@postgres:5432/medplatform?sslmode=disable

# -----------------------------------------------------------------------------
# KEYCLOAK SETTINGS
# -----------------------------------------------------------------------------
KEYCLOAK_URL=http://keycloak:8080
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin123
KEYCLOAK_CLIENT_ID=api-gateway
KEYCLOAK_CLIENT_SECRET=api-gateway-secret
KEYCLOAK_REALM=demo-hospital
# OIDC endpoints
KEYCLOAK_REALM_URL=${KEYCLOAK_URL}/realms/${KEYCLOAK_REALM}
KEYCLOAK_TOKEN_URL=${KEYCLOAK_REALM_URL}/protocol/openid-connect/token
KEYCLOAK_AUTH_URL=${KEYCLOAK_REALM_URL}/protocol/openid-connect/auth
KEYCLOAK_LOGOUT_URL=${KEYCLOAK_REALM_URL}/protocol/openid-connect/logout
KEYCLOAK_JWKS_URL=${KEYCLOAK_REALM_URL}/protocol/openid-connect/certs
KEYCLOAK_USERINFO_URL=${KEYCLOAK_REALM_URL}/protocol/openid-connect/userinfo

# -----------------------------------------------------------------------------
# KAFKA SETTINGS
# -----------------------------------------------------------------------------
KAFKA_BOOTSTRAP_SERVERS=kafka:9092
KAFKA_EXTERNAL_BOOTSTRAP_SERVERS=localhost:9093
KAFKA_CONSUMER_GROUP_ID=${APP_NAME}
KAFKA_AUTO_OFFSET_RESET=earliest
KAFKA_ENABLE_AUTO_COMMIT=true
KAFKA_AUTO_COMMIT_INTERVAL_MS=5000
KAFKA_SESSION_TIMEOUT_MS=30000
KAFKA_MAX_POLL_RECORDS=500
KAFKA_ISOLATION_LEVEL=read_committed
# Schema Registry
SCHEMA_REGISTRY_URL=http://schema-registry:8081
# Default topic configuration
KAFKA_DEFAULT_PARTITIONS=3
KAFKA_DEFAULT_REPLICATION_FACTOR=1

# -----------------------------------------------------------------------------
# REDIS SETTINGS
# -----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5
REDIS_MAX_CONN_AGE=30m
REDIS_IDLE_TIMEOUT=5m
REDIS_DIAL_TIMEOUT=5s
REDIS_READ_TIMEOUT=3s
REDIS_WRITE_TIMEOUT=3s
REDIS_POOL_TIMEOUT=4s

# -----------------------------------------------------------------------------
# MONITORING SETTINGS
# -----------------------------------------------------------------------------
# Prometheus
PROMETHEUS_URL=http://prometheus:9090
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_EVALUATION_INTERVAL=15s
# Grafana
GRAFANA_URL=http://grafana:3000
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin
# OpenTelemetry
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_RESOURCE_ATTRIBUTES=service.name=${APP_NAME},deployment.environment=${ENV}
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=0.1
OTEL_METRICS_EXPORTER=otlp
OTEL_LOGS_EXPORTER=otlp

# -----------------------------------------------------------------------------
# API GATEWAY SETTINGS
# -----------------------------------------------------------------------------
API_GATEWAY_HOST=0.0.0.0
API_GATEWAY_PORT=8081
API_GATEWAY_BASE_PATH=/api/${API_VERSION}
API_GATEWAY_TIMEOUT=30s
API_GATEWAY_MAX_BODY_SIZE=10m
API_GATEWAY_RATE_LIMIT=100
API_GATEWAY_RATE_LIMIT_BURST=200
API_GATEWAY_CORS_ALLOWED_ORIGINS=*
API_GATEWAY_CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
API_GATEWAY_CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-Tenant-ID,X-Correlation-ID
API_GATEWAY_CORS_EXPOSED_HEADERS=X-Correlation-ID
API_GATEWAY_CORS_ALLOW_CREDENTIALS=true
API_GATEWAY_CORS_MAX_AGE=86400

# -----------------------------------------------------------------------------
# SERVICE-SPECIFIC SETTINGS
# -----------------------------------------------------------------------------
# Catalog Service
CATALOG_SVC_HOST=0.0.0.0
CATALOG_SVC_PORT=8001
CATALOG_SVC_DB_SCHEMA=marketplace

# RFQ Service
RFQ_SVC_HOST=0.0.0.0
RFQ_SVC_PORT=8002
RFQ_SVC_DB_SCHEMA=marketplace

# Quote Service
QUOTE_SVC_HOST=0.0.0.0
QUOTE_SVC_PORT=8003
QUOTE_SVC_DB_SCHEMA=marketplace

# Contract Service
CONTRACT_SVC_HOST=0.0.0.0
CONTRACT_SVC_PORT=8004
CONTRACT_SVC_DB_SCHEMA=marketplace

# Asset Registry Service
ASSET_REGISTRY_SVC_HOST=0.0.0.0
ASSET_REGISTRY_SVC_PORT=8011
ASSET_REGISTRY_SVC_DB_SCHEMA=service_domain

# Device Registration Service
DEVICE_REGISTRATION_SVC_HOST=0.0.0.0
DEVICE_REGISTRATION_SVC_PORT=8012
DEVICE_REGISTRATION_SVC_DB_SCHEMA=service_domain

# QR Service
QR_SERVICE_SVC_HOST=0.0.0.0
QR_SERVICE_SVC_PORT=8013
QR_SERVICE_SVC_DB_SCHEMA=service_domain

# Ticket Service
TICKET_SVC_HOST=0.0.0.0
TICKET_SVC_PORT=8014
TICKET_SVC_DB_SCHEMA=service_domain

# WhatsApp Gateway Service
WHATSAPP_GATEWAY_SVC_HOST=0.0.0.0
WHATSAPP_GATEWAY_SVC_PORT=8015
WHATSAPP_GATEWAY_SVC_DB_SCHEMA=service_domain

# Workflow Orchestrator Service
WORKFLOW_ORCHESTRATOR_SVC_HOST=0.0.0.0
WORKFLOW_ORCHESTRATOR_SVC_PORT=8016
WORKFLOW_ORCHESTRATOR_SVC_DB_SCHEMA=service_domain

# Chat AI Service
CHAT_AI_SVC_HOST=0.0.0.0
CHAT_AI_SVC_PORT=8021
CHAT_AI_SVC_DB_SCHEMA=ai_ml

# Negotiation AI Service
NEGOTIATION_AI_SVC_HOST=0.0.0.0
NEGOTIATION_AI_SVC_PORT=8022
NEGOTIATION_AI_SVC_DB_SCHEMA=ai_ml

# Predictive Maintenance Service
PREDICTIVE_MAINT_SVC_HOST=0.0.0.0
PREDICTIVE_MAINT_SVC_PORT=8023
PREDICTIVE_MAINT_SVC_DB_SCHEMA=ai_ml

# Dispatch AI Service
DISPATCH_AI_SVC_HOST=0.0.0.0
DISPATCH_AI_SVC_PORT=8024
DISPATCH_AI_SVC_DB_SCHEMA=ai_ml

# Diagnostic Workflow Service
DIAGNOSTIC_WORKFLOW_SVC_HOST=0.0.0.0
DIAGNOSTIC_WORKFLOW_SVC_PORT=8025
DIAGNOSTIC_WORKFLOW_SVC_DB_SCHEMA=service_domain

# Reporting Service
REPORTING_SVC_HOST=0.0.0.0
REPORTING_SVC_PORT=8031
REPORTING_SVC_DB_SCHEMA=shared

# Parts Inventory Service
PARTS_INVENTORY_SVC_HOST=0.0.0.0
PARTS_INVENTORY_SVC_PORT=8032
PARTS_INVENTORY_SVC_DB_SCHEMA=service_domain

# Demand Forecast Service
DEMAND_FORECAST_SVC_HOST=0.0.0.0
DEMAND_FORECAST_SVC_PORT=8033
DEMAND_FORECAST_SVC_DB_SCHEMA=ai_ml

# Geo-Location Service
GEO_LOCATION_SVC_HOST=0.0.0.0
GEO_LOCATION_SVC_PORT=8041
GEO_LOCATION_SVC_DB_SCHEMA=geography

# -----------------------------------------------------------------------------
# HEALTHCARE COMPLIANCE SETTINGS
# -----------------------------------------------------------------------------
# HIPAA Compliance
HIPAA_COMPLIANCE_ENABLED=true
HIPAA_AUDIT_LOG_RETENTION_DAYS=2555  # 7 years
HIPAA_PHI_ENCRYPTION_ENABLED=true
HIPAA_ACCESS_CONTROL_ENABLED=true
HIPAA_AUTOMATIC_LOGOUT_MINUTES=15

# DPDP 2023 Compliance (India)
DPDP_COMPLIANCE_ENABLED=true
DPDP_CONSENT_REQUIRED=true
DPDP_DATA_MINIMIZATION_ENABLED=true
DPDP_RIGHT_TO_ERASURE_ENABLED=true

# IMDR 2017 Compliance (India Medical Device Rules)
IMDR_COMPLIANCE_ENABLED=true
IMDR_DEVICE_TRACKING_ENABLED=true

# -----------------------------------------------------------------------------
# SECURITY SETTINGS
# -----------------------------------------------------------------------------
# JWT Settings
JWT_SECRET=development-jwt-secret-key-change-in-production
JWT_EXPIRATION=15m
JWT_REFRESH_EXPIRATION=24h
JWT_ISSUER=${KEYCLOAK_REALM_URL}
JWT_AUDIENCE=${KEYCLOAK_CLIENT_ID}

# Encryption Settings
ENCRYPTION_KEY=development-encryption-key-32-bytes
ENCRYPTION_ALGORITHM=AES-256-GCM

# Password Policy
PASSWORD_MIN_LENGTH=10
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_MAX_AGE_DAYS=90
PASSWORD_HISTORY_COUNT=5

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_DURATION=1m

# CORS Settings
CORS_ALLOWED_ORIGINS=*
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOWED_HEADERS=Authorization,Content-Type,X-Tenant-ID,X-Correlation-ID
CORS_EXPOSED_HEADERS=X-Correlation-ID
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=86400

# -----------------------------------------------------------------------------
# LOGGING AND OBSERVABILITY SETTINGS
# -----------------------------------------------------------------------------
# Log Settings
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_OUTPUT=stdout
LOG_INCLUDE_CALLER=true
LOG_TIMESTAMP_FORMAT=RFC3339
LOG_MAX_SIZE=100  # MB
LOG_MAX_AGE=7     # days
LOG_MAX_BACKUPS=5
LOG_COMPRESS=true

# Trace Settings
TRACE_ENABLED=true
TRACE_SAMPLE_RATE=0.1
TRACE_ID_HEADER=X-Trace-ID

# Metrics Settings
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
METRICS_NAMESPACE=${APP_NAME}
METRICS_SUBSYSTEM=${ENV}

# Health Check Settings
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_ENDPOINT=/health
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=5s

# -----------------------------------------------------------------------------
# FEATURE FLAGS AND TOGGLES
# -----------------------------------------------------------------------------
# Feature Toggle System
FEATURE_TOGGLE_PROVIDER=redis
FEATURE_TOGGLE_REDIS_KEY_PREFIX=feature:

# Core Features
FEATURE_QR_CODE_ENABLED=true
FEATURE_WHATSAPP_INTEGRATION_ENABLED=true
FEATURE_AI_TRIAGE_ENABLED=true
FEATURE_PREDICTIVE_MAINTENANCE_ENABLED=true
FEATURE_NEGOTIATION_AI_ENABLED=true
FEATURE_DIAGNOSTIC_WORKFLOW_ENABLED=true
FEATURE_LABORATORY_INTEGRATION_ENABLED=true

# Experimental Features
FEATURE_VOICE_RECOGNITION_ENABLED=false
FEATURE_AR_DIAGNOSTICS_ENABLED=false
FEATURE_BLOCKCHAIN_TRACKING_ENABLED=false
FEATURE_IOT_INTEGRATION_ENABLED=false

# -----------------------------------------------------------------------------
# MULTI-TENANT CONFIGURATION
# -----------------------------------------------------------------------------
# Tenant Settings
MULTI_TENANT_ENABLED=true
DEFAULT_TENANT_ID=11111111-1111-1111-1111-111111111111
DEFAULT_TENANT_NAME=demo-hospital
TENANT_ID_HEADER=X-Tenant-ID
TENANT_HEADER_REQUIRED=true
TENANT_AUTO_CREATE=false
TENANT_DB_SCHEMA_ISOLATION=false
TENANT_DB_ROW_LEVEL_SECURITY=true

# -----------------------------------------------------------------------------
# WHATSAPP API SETTINGS (FOR DEVELOPMENT)
# -----------------------------------------------------------------------------
# WhatsApp Business API
WHATSAPP_API_URL=https://waba-sandbox.360dialog.io/v1
WHATSAPP_API_TOKEN=development-token-placeholder
WHATSAPP_BUSINESS_PHONE_NUMBER=911234567890
WHATSAPP_WEBHOOK_SECRET=whatsapp-webhook-secret
WHATSAPP_MESSAGE_TEMPLATE_NAMESPACE=medical_equipment
WHATSAPP_ENABLE_MOCK=true
WHATSAPP_MOCK_DELAY_MS=500

# -----------------------------------------------------------------------------
# EMAIL SERVICE SETTINGS
# -----------------------------------------------------------------------------
# SMTP Settings (MailHog for development)
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=no-reply@medplatform.local
SMTP_FROM_NAME=Medical Equipment Platform
SMTP_SECURE=false
SMTP_REQUIRE_TLS=false
EMAIL_TEMPLATE_DIR=./templates/email

# -----------------------------------------------------------------------------
# ENVIRONMENT-SPECIFIC OVERRIDES
# -----------------------------------------------------------------------------
# Development Specific
DEV_MODE=true
AUTO_MIGRATE_DB=true
MOCK_THIRD_PARTY_APIS=true
DISABLE_AUTHENTICATION=false
SEED_DEMO_DATA=true
ENABLE_SWAGGER=true
SWAGGER_URL=/swagger/index.html
ENABLE_PROFILING=true
PROFILING_URL=/debug/pprof

# Testing Specific (when ENV=test)
TEST_DB_URL=postgres://postgres:postgres@localhost:5432/medplatform_test?sslmode=disable
TEST_KAFKA_BOOTSTRAP_SERVERS=localhost:9093
TEST_REDIS_URL=redis://localhost:6379/1
TEST_KEYCLOAK_URL=http://localhost:8080
